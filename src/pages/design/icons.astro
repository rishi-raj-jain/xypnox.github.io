---
import Layout from "../../layouts/BaseLayout.astro";
import { iconsData } from "../../content/iconsData";
import { capitalize } from "../../lib/text";

const icons = iconsData.map((iconCol) => ({
  ...iconCol,
  slug: iconCol.name.toLowerCase().replace(" ", "-"),
  covers: iconCol.icons.map((icon) => ({
    name: icon.replace(".svg", ""),
    path: `/icons/${icon}`,
  })),
}));
---

<Layout title="Icons">
  <h1 class="page-title">Icons</h1>
  <nav class="icons-nav">
    {
      icons.map((col) => (
        <a href={`#${col.slug}`}>
          {col.name} - {col.covers.length}
        </a>
      ))
    }
  </nav>
  <div class="cover-collections">
    {
      icons.map((col) => (
        <div class="cover-collection">
          <h2 id={col.slug}>{col.name}</h2>
          {col.description && <p>{col.description}</p>}
          <div class="cover-collection-grid">
            {col.covers.map((icon) => (
              <div class="coverGridItem">
                <a href={icon.path} target="_blank" rel="noopener noreferrer">
                  <img src={icon.path} loading="lazy" alt={icon.name} />
                </a>
                <p class="cover-name">{capitalize(icon.name)}</p>
              </div>
            ))}
          </div>
        </div>
      ))
    }
  </div>
</Layout>

<style>
  .page-title {
    text-align: center;
  }
  .icons-nav {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
  }
  .cover-collections {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2rem;
    width: 100%;
  }
  .cover-collection {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    width: 100%;
    padding: 2rem;
  }
  .cover-collection h2 {
    font-size: var(--font-size-xl);
    color: var(--secondary-color);
    margin: 0;
  }
  .cover-collection p {
    font-size: var(--font-size-base);
    color: var(--fadeText);
    margin: 0;
  }
  .cover-collection p.cover-name {
    color: var(--text);
    margin: 0;
  }
  .cover-collection-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    grid-gap: 4rem;
    width: 100%;
  }
  .coverGridItem {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .coverGridItem img {
    width: 100%;
    height: auto;
    border-radius: 0.5rem;
  }

  @media (max-width: 768px) {
    .cover-collection-grid {
      grid-template-columns: 1fr;
      grid-gap: 1rem;
    }
    .cover-collection,
    .cover-collections {
      padding: 1rem;
    }
  }
</style>

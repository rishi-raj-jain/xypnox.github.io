---
// Component to show latest from blog
import BlogPostCard from "./BlogPostCard.astro";
import { latestBlog, topFiveTags } from "../lib/dataAstro"
import Tag from '../components/nav/Tag.astro'
---

<div class="blog-card">
  {
    topFiveTags.length > 0 && <div class="toptags">
      <em>Top Tags</em>
      {topFiveTags.map((t: string) => <Tag tag={t} />)}
    </div>
  }
  {
    latestBlog && latestBlog.length > 0 &&
    <div class="col-l">
      <div class="first">
        <em>Latest Posts</em>
        <BlogPostCard slug={latestBlog[0].slug} />
      </div>
      <BlogPostCard hideImage slug={latestBlog[1].slug} />
      <BlogPostCard hideImage slug={latestBlog[2].slug} />
    </div>
  }
</div>

<style>
  em {
    font-size: var(--font-size-base);
  }
  .blog-card {
    display: flex;
    align-items: stretch;
    gap: 1rem;
    width: 100%;
  }
  .toptags {
    display: flex;
    align-items: flex-end;
    flex-direction: column;
    gap: 0.5rem;
    height: auto;
    width: max-content;
  }

  .toptags, .col-l {
    border: 1px solid var(--border);
    background: var(--background);
    box-shadow: var(--cardShadow);
    padding: 1rem;
    height: 100%;
    border-radius: 1rem;
  }
  .col-l {
    width: 100%;
    padding: 1rem 2rem 2rem;
  }

  .col-l {
    display: grid;
    grid-template: 1fr 1fr / 1fr 1fr;
    gap: 2rem;
  }

  .col-l .first {
    grid-row: 1 / 3;
    grid-column: 1 / 2;
  }

  .col-l :global(.blog-entry) {
    /* max-width: 400px; */
  }

  .col-l :global(.blog-entry):nth-child(2) {
    grid-column: 2 / 3;
  }

  .col-l :global(.blog-entry):nth-child(3) {
    grid-column: 2 / 3;
  }
  .col-end :global(.blog-entry) :global(h2) {
    font-size: var(--font-size-md);
  }

  .first {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  @media (max-width: 768px) {
    .blog-card {
      flex-direction: column;
    }
    .toptags {
      flex-direction: row;
      align-items: center;
      flex-wrap: wrap;
      width: 100%;
    }

    .col-l {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      flex-wrap: wrap;
      align-items: flex-start;
    }
  }
</style>
